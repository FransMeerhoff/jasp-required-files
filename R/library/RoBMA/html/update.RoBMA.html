<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Updates a fitted RoBMA object</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for update.RoBMA {RoBMA}"><tr><td>update.RoBMA {RoBMA}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Updates a fitted RoBMA object</h2>

<h3>Description</h3>

<p><code>update.RoBMA</code> can be used to
</p>

<ol>
<li><p>add an additional model to an existing <code>"RoBMA"</code> object by
specifying either a null or alternative prior for each parameter
and the prior odds of the model (<code>prior_odds</code>), see the
<code>vignette("CustomEnsembles")</code> vignette,
</p>
</li>
<li><p>change the prior odds of fitted models by specifying a vector
<code>prior_odds</code> of the same length as the fitted models,
</p>
</li>
<li><p>refitting models that failed to converge with updated settings
of control parameters,
</p>
</li>
<li><p>or changing the convergence criteria and recalculating the ensemble
results by specifying new <code>control</code> argument and setting
<code>refit_failed == FALSE</code>.
</p>
</li></ol>



<h3>Usage</h3>

<pre>
## S3 method for class 'RoBMA'
update(
  object,
  refit_failed = TRUE,
  prior_mu = NULL,
  prior_tau = NULL,
  prior_omega = NULL,
  prior_odds = NULL,
  prior_mu_null = NULL,
  prior_tau_null = NULL,
  prior_omega_null = NULL,
  prior_sigma = NULL,
  study_names = NULL,
  control = NULL,
  chains = NULL,
  iter = NULL,
  burnin = NULL,
  thin = NULL,
  parallel = NULL,
  seed = NULL,
  ...
)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>object</code></td>
<td>
<p>a fitted RoBMA object.</p>
</td></tr>
<tr valign="top"><td><code>refit_failed</code></td>
<td>
<p>whether failed models should be refitted. Relevant only
if new priors or <code>prior_odds</code> are not supplied. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr valign="top"><td><code>prior_mu</code></td>
<td>
<p>a prior distribution for the <code>mu</code> parameter that
will be treated as belonging to the alternative hypothesis.</p>
</td></tr>
<tr valign="top"><td><code>prior_tau</code></td>
<td>
<p>a prior distribution for the <code>tau</code> parameter that
will be treated as belonging to the alternative hypothesis.</p>
</td></tr>
<tr valign="top"><td><code>prior_omega</code></td>
<td>
<p>a prior weight function for the <code>omega</code>
parameter that will be treated as belonging to the alternative hypothesis.</p>
</td></tr>
<tr valign="top"><td><code>prior_odds</code></td>
<td>
<p>either a single value specifying prior model odds
of a newly specified model using priors argument, or a vector of the
same length as already fitted models to update their prior odds.</p>
</td></tr>
<tr valign="top"><td><code>prior_mu_null</code></td>
<td>
<p>list of prior distribution for the <code>mu</code> parameter that
will be treated as belonging to the null hypothesis. Defaults to point distribution
with location at 0 (
<code>prior(distribution = "point", parameters = list(location = 0))</code>).</p>
</td></tr>
<tr valign="top"><td><code>prior_tau_null</code></td>
<td>
<p>a prior distribution for the <code>tau</code> parameter that
will be treated as belonging to the null hypothesis.</p>
</td></tr>
<tr valign="top"><td><code>prior_omega_null</code></td>
<td>
<p>a prior weight function for the <code>omega</code> parameter
that will be treated as belonging to the null hypothesis.</p>
</td></tr>
<tr valign="top"><td><code>prior_sigma</code></td>
<td>
<p>a prior distributions for the <code>sigma</code> parameter.
Defaults to
<code>prior(distribution = "invgamma", parameters = list(shape = 1, scale = 1))</code>.
Only applicable if <code>likelihood = "wls"</code>.</p>
</td></tr>
<tr valign="top"><td><code>study_names</code></td>
<td>
<p>an optional argument with the names of the studies.</p>
</td></tr>
<tr valign="top"><td><code>control</code></td>
<td>
<p>a list of additional arguments for the MCMC algorithm.
Possible options are:
</p>

<dl>
<dt>autofit</dt><dd><p>Whether the models should be refitted until convergence.
Defaults to <code>FALSE</code></p>
</dd>
<dt>max_error</dt><dd><p>The target MCMC error for the autofit function. The
argument is passed to <a href="../../coda/html/raftery.diag.html">raftery.diag</a> as 'r'. Defaults to
<code>.01</code>.</p>
</dd>
<dt>max_rhat</dt><dd><p>The target Rhat error for the autofit function. The
argument is passed to <a href="../../runjags/html/add.summary.html">add.summary</a> as 'psrf.target'.
Defaults to <code>1.05</code>.</p>
</dd>
<dt>max_time</dt><dd><p>A string specifying the maximum fitting time in case
of autofit. Defaults to <code>Inf</code>. Can be specified as a number and
a unit (Acceptable units include ’seconds’, ’minutes’, ’hours’, ’days’,
’weeks’, or the first letter(s) of each), i.e. <code>"1hr"</code>.</p>
</dd>
<dt>adapt</dt><dd><p>A number of iterations used for MCMC adaptation. Defaults
to <code>1000</code>.</p>
</dd>
<dt>bridge_max_iter</dt><dd><p>Maximum number of iterations for the
<a href="../../bridgesampling/html/bridge_sampler.html">bridge_sampler</a> function. Defaults to <code>10000</code></p>
</dd>
<dt>allow_max_error</dt><dd><p>Maximum allowed MCMC error for a model to be taken
into consideration. The model will be removed from the ensemble if it fails to
achieve the set MCMC error. Defaults to <code>NULL</code> - no model will be
removed based on MCMC error.</p>
</dd>
<dt>allow_max_rhat</dt><dd><p>Maximum allowed Rhat for a model to be taken into
consideration. Model will be removed from the ensemble if it fails to
achieve the set Rhat. Defaults to <code>NULL</code> - no model will be removed
based on Rhat.</p>
</dd>
<dt>allow_min_ESS</dt><dd><p>Minimum allowed ESS for a model to be taken into
consideration. Model will be removed from the ensemble if it fails to
achieve the set ESS. Defaults to <code>NULL</code> - no model will be removed
based on ESS.</p>
</dd>
<dt>allow_inc_theta</dt><dd><p>Whether the diagnostics for theta should be
included into model removal decision. Defaults to <code>NULL</code> - only
'mu', 'tau', and 'omega' estimates will be taken into account.</p>
</dd>
<dt>balance_prob</dt><dd><p>Whether the prior probability of the removed model
should be redistributed to other models with the same type if possible
(crossing of effect / heterogeneity / publication bias). Defaults to
<code>TRUE</code>.</p>
</dd>
<dt>silent</dt><dd><p>Whether all fitting messages should be suppressed. Defaults
to <code>FALSE</code>. Ideal for getting rid of the &quot;full precision may not have
been achieved in pntfinal'&quot; warning that cannot be suppressed in any
other way.</p>
</dd>
<dt>boost</dt><dd><p>Whether the likelihood functions implemented using the boost
C++ library should be used as the first option. The higher precision of
boost allows to estimate models in difficult cases. Defaults to <code>FALSE</code>.
The R distributions are used as default and boost is used only if they fail.
Warning: the estimation using boost takes about twice as long.</p>
</dd>
<dt>cores</dt><dd><p>Number of cores to bu used fo parallel computation. If
<code>parallel == TRUE</code>, the default number is equal to number of cores - 1,
and 1 (no parallel processing otherwise).</p>
</dd>
</dl>
</td></tr>
<tr valign="top"><td><code>chains</code></td>
<td>
<p>a number of chains of the MCMC algorithm.</p>
</td></tr>
<tr valign="top"><td><code>iter</code></td>
<td>
<p>a number of sampling iterations of the MCMC algorithm.
Defaults to <code>10000</code>, with a minimum of <code>4000</code>.</p>
</td></tr>
<tr valign="top"><td><code>burnin</code></td>
<td>
<p>a number of burnin iterations of the MCMC algorithm.
Defaults to <code>5000</code>.</p>
</td></tr>
<tr valign="top"><td><code>thin</code></td>
<td>
<p>a thinning of the chains of the MCMC algorithm. Defaults to
<code>1</code>.</p>
</td></tr>
<tr valign="top"><td><code>parallel</code></td>
<td>
<p>whether the individual models should be fitted in parallel.
Defaults to <code>FALSE</code>. The <code>cores</code> argument within the <code>control</code>
list will overwrite the setting if specified to a number higher than 1.</p>
</td></tr>
<tr valign="top"><td><code>seed</code></td>
<td>
<p>a seed to be set before model fitting, marginal likelihood
computation, and posterior mixing for exact results reproducibility. Defaults
to <code>NULL</code> - no seed is set.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>additional arguments.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code><a href="RoBMA.html">RoBMA()</a></code> for more details.
</p>


<h3>Value</h3>

<p><code>RoBMA</code> returns an object of <a href="../../base/html/class.html">class</a> <code>"RoBMA"</code>.
</p>


<h3>See Also</h3>

<p><code><a href="RoBMA.html">RoBMA()</a></code>, <code><a href="summary.RoBMA.html">summary.RoBMA()</a></code>, <code><a href="prior.html">prior()</a></code>, <code><a href="check_setup.html">check_setup()</a></code>
</p>


<h3>Examples</h3>

<pre>
## Not run: 
# using the example data from Anderson et al. 2010 and fitting the default model
# (note that the model can take a while to fit)
fit &lt;- RoBMA(r = Anderson2010$r, n = Anderson2010$n, study_names = Anderson2010$labels)

# the update function allows us to change the prior model probability of each model
fit1 &lt;- update(fit, prior_odds = c(10,1,1,1,1,1,1,1,1,1,1,1))

# add an additional model with different priors specification (see '?prior' for more information)
fit2 &lt;- update(fit,
               priors_mu_null = prior("point", parameters = list(location = 0)),
               priors_tau = prior("normal",
                                  parameters = list(mean = 0, sd = 1),
                                  truncation = list(lower = 0, upper = Inf)),
               priors_omega = prior("one-sided",
                                    parameters = list(cuts = c(.05), alpha = c(1, 1))))

# change the model convergence criteria to mark models with ESS lower than 2000 as non-covergent
fit3 &lt;- update(fit, control = list(allow_min_ESS = 2000))

# and refit them failed models with increased number of burnin iterations
fit4 &lt;- update(fit3, burnin = 10000)


## End(Not run)

</pre>

<hr /><div style="text-align: center;">[Package <em>RoBMA</em> version 1.2.0.900 <a href="00Index.html">Index</a>]</div>
</body></html>
