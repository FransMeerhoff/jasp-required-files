<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Sampling from Audit Populations</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for sampling {jfa}"><tr><td>sampling {jfa}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Sampling from Audit Populations</h2>

<h3>Description</h3>

<p>This function takes a data frame and performs sampling according to one of three popular algorithms: random sampling, cell sampling, or fixed interval sampling. Sampling is done in combination with one of two sampling units: records or monetary units The returned object is of class <code>jfaSampling</code> and can be used with associated <code>print()</code> and <code>plot()</code> methods.
</p>


<h3>Usage</h3>

<pre>
sampling(population, sampleSize, bookValues = NULL, units = "records", 
         algorithm = "random", intervalStartingPoint = 1, ordered = TRUE, 
         ascending = TRUE, withReplacement = FALSE, seed = 1)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>population</code></td>
<td>
<p>a data frame containing the population the auditor wishes to sample from.</p>
</td></tr>
<tr valign="top"><td><code>sampleSize</code></td>
<td>
<p>the number of observations that need to be selected from the population. Can also be an object of class <code>jfaPlanning</code>.</p>
</td></tr>
<tr valign="top"><td><code>bookValues</code></td>
<td>
<p>a character specifying the name of the column containing the book values (as in the population data).</p>
</td></tr>
<tr valign="top"><td><code>units</code></td>
<td>
<p>can be either <code>records</code> (default) for record sampling, or <code>mus</code> for monetary unit sampling.</p>
</td></tr>
<tr valign="top"><td><code>algorithm</code></td>
<td>
<p>can be either one of <code>random</code> (default) for random sampling, <code>cell</code> for cell sampling, or <code>interval</code> for fixed interval sampling.</p>
</td></tr>
<tr valign="top"><td><code>intervalStartingPoint</code></td>
<td>
<p>the starting point in the interval (used only in fixed interval sampling)</p>
</td></tr>
<tr valign="top"><td><code>ordered</code></td>
<td>
<p>if <code>TRUE</code> (default), the population is first ordered according to the value of their book values.</p>
</td></tr>
<tr valign="top"><td><code>ascending</code></td>
<td>
<p>if <code>TRUE</code> (default), order the population in ascending order.</p>
</td></tr>
<tr valign="top"><td><code>withReplacement</code></td>
<td>
<p>whether sampling should be performed with replacement. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr valign="top"><td><code>seed</code></td>
<td>
<p>seed to reproduce results. Default is 1.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This first part of this section elaborates on the possible options for the <code>units</code> argument:
</p>

<ul>
<li><p><code>records</code>:     In record sampling, each observation in the population is seen as a sampling unit. An observation of $5000 is therefore equally likely to be selected as an observation of $500.
</p>
</li>
<li><p><code>mus</code>:         In monetary unit sampling, each monetary unit in the population is seen as a sampling unit. An observation of $5000 is therefore ten times more likely to be selected as an observation of $500.
</p>
</li></ul>

<p>This second part of this section elaborates on the possible options for the <code>algorithm</code> argument:
</p>

<ul>
<li><p><code>random</code>:      In random sampling each sampling unit in the population is drawn with equal probability.
</p>
</li>
<li><p><code>cell</code>:        In cell sampling the sampling units in the population are divided into a number (equal to the sample size) of intervals. From each interval one sampling unit is selected with equal probability.
</p>
</li>
<li><p><code>interval</code>:    In fixed interval sampling the sampling units in the population are divided into a number (equal to the sample size) of intervals. From each interval one sampling unit is selected according to a fixed starting point (<code>intervalStartingPoint</code>).
</p>
</li></ul>



<h3>Value</h3>

<p>An object of class <code>jfaSampling</code> containing:
</p>
<table summary="R valueblock">
<tr valign="top"><td><code>population</code></td>
<td>
<p>a data frame containing the input population.</p>
</td></tr>
<tr valign="top"><td><code>sample</code></td>
<td>
<p>a data frame containing the selected observations.</p>
</td></tr>
<tr valign="top"><td><code>bookValues</code></td>
<td>
<p>if specified, the name of the specified book value column.</p>
</td></tr>
<tr valign="top"><td><code>algorithm</code></td>
<td>
<p>the algorithm that was used for sampling.</p>
</td></tr>
<tr valign="top"><td><code>units</code></td>
<td>
<p>the sampling units that were used for sampling.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Koen Derks, <a href="mailto:k.derks@nyenrode.nl">k.derks@nyenrode.nl</a>
</p>


<h3>References</h3>

<p>Wampler, B., &amp; McEacharn, M. (2005). Monetary-unit sampling using Microsoft Excel. <em>The CPA journal</em>, 75(5), 36.
</p>


<h3>See Also</h3>

<p><code><a href="auditPrior.html">auditPrior</a></code> <code><a href="planning.html">planning</a></code> <code><a href="evaluation.html">evaluation</a></code>
</p>


<h3>Examples</h3>

<pre>
library(jfa)
set.seed(1)

# Generate some audit data (N = 1000).
population &lt;- data.frame(ID = sample(1000:100000, size = 1000, replace = FALSE), 
                         bookValue = runif(n = 1000, min = 700, max = 1000))

# Draw a custom sample of 100 from the population (via random record sampling):

s1 &lt;- sampling(population = population, sampleSize = 100, algorithm = "random", 
               units = "records", seed = 1)
print(s1)

# ------------------------------------------------------------
#                  jfa Selection Summary
# ------------------------------------------------------------
# Input:
#       
# Population size:         1000 
# Requested sample size:   100 
# Sampling units:          Records 
# Algorithm:               Random sampling   
# ------------------------------------------------------------ 
# Output:
# 
# Obtained sample size:    100 
# Proportion n/N:          0.1 
# ------------------------------------------------------------ 

# Use the result from the planning stage in the sampling stage:

p1 &lt;- planning(materiality = 0.05, confidence = 0.95, expectedError = 0.025, 
               likelihood = "binomial")

# Draw a sample via random monetary unit sampling:
s2 &lt;- sampling(population = population, sampleSize = p1, algorithm = "random", 
               units = "mus", seed = 1, bookValues = "bookValue")
print(s2)

# ------------------------------------------------------------
#                  jfa Selection Summary
# ------------------------------------------------------------
# Input:
#      
# Population size:         1000 
# Requested sample size:   234 
# Sampling units:          Monetary units 
# Algorithm:               Random sampling   
# ------------------------------------------------------------ 
# Output:
#
# Obtained sample size:    234 
# Proportion n/N:          0.234 
# Percentage of value:     23.3% 
# ------------------------------------------------------------

</pre>

<hr /><div style="text-align: center;">[Package <em>jfa</em> version 0.3.1 <a href="00Index.html">Index</a>]</div>
</body></html>
